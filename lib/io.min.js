!function(){function b(a,b,c,d,e){if(c=c||LaPa.CONF.server.requestUrl,e=e||"get",!c)return void(b&&b(!1));var f="";if(a){f+="?";for(var g in a)f+=g+"="+a[g]+"&"}var h={method:e,cache:"no-cache"};"post"==e&&(h.body=JSON.stringify(a)),fetch(c+("get"==e?f:""),h).then(function(a){return 200===a.status&&(d?a.text():a.json())}).then(function(a){b&&b(a)})}var a=function(a,b,c,d,e){if(c=c||LaPa.CONF.server.requestUrl,!c)return void(b&&b(!1));a=a?"?query="+JSON.stringify(a)+"&rnd="+(new Date).getTime():"?rnd="+(new Date).getTime();var f=new XMLHttpRequest;f.open("GET",c+a,!0),f.onreadystatechange=function(){if(4==f.readyState){var a=!1;if(200==f.status||0==f.status)if(d)a=f.responseText;else try{a=JSON.parse(f.responseText)}catch(b){a=!1}else a=!1;b&&b(a)}},f.send()};LaPa.HOOK.reg("initLib",!1,function(){window.LaPa.legacyIo=a,window.LaPa.io="undefined"==typeof fetch?a:b},"/lib/io.min.js"),LaPa.importLib("/lib/io.min.js")}();