!function(){"use strict";function a(a,b){LaPa.require("/lib/io.min.js",function(){LaPa.io(!1,function(c){c?(LaPa.PAGE[a]={html:c,url:a},LaPa.page(a,b)):(document.getElementById("LaPaLoader")&&(document.getElementById("LaPaLoader").style.opacity="0",setTimeout(function(){document.getElementById("LaPaLoader").style.display="none"},500)),LaPa.CONF.pageInit&&LaPa.CONF.pageInit(),LaPa.message("Страница не найдена"))},a,!0,"document")})}function b(a,c){return!!LaPa.EXT.check("genPage")&&(c?LaPa.EXT.get("genPage",c,b):void(c||(a?(LaPa.targetPage.contentHTML=a,g(null,LaPa.targetPage)):(LaPa.targetUrl=!1,LaPa.targetPage=!1,LaPa.message("Страница не найдена")))))}function c(a){a.content?LaPa.require("/lib/io.min.js",function(){LaPa.io(!1,function(b){b?(a.contentHTML=b,a=LaPa.EXT.get("preparePage",a),g(null,a)):(LaPa.targetUrl=!1,LaPa.targetPage=!1,LaPa.message("Страница не найдена"))},LaPa.CONF.pagesDir+a.content,!0)}):b(null,a)}function d(a,b){if(LaPa.CONF.fastTransitions)document.documentElement.innerHTML=LaPa.PAGE[a].html,LaPa.CONF.loader&&LaPa.CONF.loader.length&&(document.body.innerHTML+='<div id="LaPaLoader">'+LaPa.CONF.loader+"</div>"),i(),LaPa.HOOK.call("readyPage",a,!1);else{var c=window.LaPa;document.open(),document.write(LaPa.PAGE[a].html+"<script>LaPa.HOOK.call('readyPage','"+a+"',false);</script>"),document.close(),window.LaPa=c,LaPa.CONF.loader&&LaPa.CONF.loader.length&&(document.body.innerHTML+='<div id="LaPaLoader">'+LaPa.CONF.loader+"</div>")}LaPa.pageState="ready",b||LaPa.historyAPI.push(a,window.title,a),LaPa.thisPage=a,LaPa.targetPage=!1}function e(a){return LaPa.CONF.contentContainer?(document.getElementById(LaPa.CONF.contentContainer).innerHTML=a.contentHTML,window.scrollTo(0,0),h(),LaPa.HOOK.call("readyPage",LaPa.targetUrl,!1),LaPa.pageState="ready",LaPa.noHistory||LaPa.historyAPI.push(LaPa.targetUrl,window.title,LaPa.targetUrl),LaPa.noHistory=!1,LaPa.thisPage=LaPa.targetUrl,LaPa.targetPage=!1,void(LaPa.targetUrl=!1)):LaPa.message("Не указан контейнер страниц")}function g(a,b){if(!b){var d="/"==a?[a]:a.split("/"),f=!1,g=!1;for(var h in d)if(""!=d[h])if(b)b.pages[d[h]]?(b=b.pages[d[h]],f=!0):(f=!1,g=!0);else if(LaPa.PAGES[d[h]])b=LaPa.PAGES[d[h]],f=!0;else{for(var i in LaPa.PAGES)LaPa.PAGES[i].url==a&&(b=LaPa.PAGES[i],f=!0,g=!0);g||(f=!1,g=!0)}if(!f)return LaPa.message("Страница не найдена")}return LaPa.targetUrl=a||LaPa.targetUrl,LaPa.targetPage=b,b.contentHTML?void e(b):void c(b)}function h(){var a=document.getElementsByTagName("a");for(var b in a)a.hasOwnProperty(b)&&null==a[b].onclick&&a[b].host==location.host&&(a[b].onclick=function(){return LaPa.page(this.pathname),!1})}function i(a){var b=document.getElementsByTagName("script");for(var c in b)if(b.hasOwnProperty(c))if(b[c].src){if(LaPa.SCRIPTS[b[c].src])continue;if(b[c].attributes.lapaskip){j(b[c]);continue}LaPa.SCRIPTS[b[c].src]=!!a||j(b[c])}else a||j(b[c])}function j(a){if(k(a)===!0)a.parentNode.replaceChild(l(a),a);else for(var b=0,c=a.childNodes;b<c.length;)j(c[b++]);return a}function k(a){return"SCRIPT"===a.tagName}function l(a){var b=document.createElement("script");b.text=a.innerHTML;for(var c=a.attributes.length-1;c>=0;c--)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}LaPa.HOOK.reg("initLib",!1,function(){LaPa.PAGE=LaPa.PAGE||{},LaPa.SCRIPTS={},LaPa.page=g,LaPa.renderPage=d,LaPa.getPage=a,LaPa.parseLinks=h,LaPa.CONF.parseLinks&&LaPa.HOOK.reg("readyPage",!1,LaPa.parseLinks,"Links fetch"),LaPa.CONF.loader&&LaPa.HOOK.reg("readyPage",!1,function(){document.getElementById("LaPaLoader")&&(document.getElementById("LaPaLoader").style.opacity="0",setTimeout(function(){document.getElementById("LaPaLoader").style.display="none"},500))},"Loader remove"),i(!0),LaPa.thisPage||LaPa.historyAPI.replace(location.pathname,window.title),LaPa.CONF.pagesJSON&&LaPa.require("/lib/io.min.js",function(){LaPa.io(!1,function(a){a&&(LaPa.PAGES=a)},LaPa.CONF.pagesJSON)}),LaPa.EXT.reg("preparePage"),LaPa.EXT.reg("genPage"),LaPa.CONF.pageInit&&LaPa.HOOK.reg("readyPage",!1,LaPa.CONF.pageInit,"pageInit"),LaPa.CONF.appInit&&LaPa.CONF.appInit()},"/lib/page.min.js"),LaPa.importLib("/lib/page.min.js")}();